<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  #headInclude()
  <script type="text/javascript">
  #if($message)alert("#javaScriptEscape($message)");#end

  function doEdit(memberId) {
    var url = "../member/memberEdit.do?token=$!{command.token}&memberId=" + memberId;
    document.location.href = url;
  }

  function doDelete() {
    if (!hasCheckBoxSelect("memberId")) {
      alert("请选择要删除的玩家！");
      return;
    }
    if (confirm("您确定要删除所选择的玩家吗?")) {
      var f =  document.listForm;
      f.action = "../member/memberDelete.do";
      f.submit();      
    }
  }
  
  

function frozen(id){
	if(confirm("确认冻结玩家账户？")){
	   $.ajax({
        url: '../member/frozenMemberAjax.do',
        type: 'POST',
		data:"memberId="+id,
        cache: false,
        success: function(result) {
				var s=$.parseJSON(result);
					alert(s[0].message);
					 location.reload()
				}
   		 });
	}
}

function thwa(id){
	if(confirm("确认解冻玩家账户？")){
	   $.ajax({
        url: '../member/thwaMemberAjax.do',
        type: 'POST',
		data:"memberId="+id,
        cache: false,
        success: function(result) {
				var s=$.parseJSON(result);
					alert(s[0].message);
					 location.reload()
				}
   		 });
	}
}
  </script>
</head>
<body>
<div class="PageHeader">
  <div class="LeftBox Title">已参与游戏玩家列表</div>
</div>

<div class="SearchBox" id="divSearch">
<form name="queryForm" action="#getRequestUri()" method="post" class="indieui-form">
  <table class="TbCommon">
    <tr>
      <td class="TdLabel" style="width:100px;">玩家编号：</td>
      <td class="TdInput">
        <input type="text" name="staffId" value="" >
      </td>
      <td class="TdLabel" style="width:100px;">玩家姓名：</td>
      <td class="TdInput">
        <input type="text" name="zsxm" value="" >
      </td>
    </tr>
  </table>
  <div class="CommandTool">
    <input type="button" value="确 定" onClick="javascript:document.queryForm.submit();jQuery('body').processMask();"/>
    <input type="button" value="清 空" onClick="javascript:clearQuery(document.queryForm);"/>
    <input type="button" value="取 消" onClick="javascript:showDiv('divSearch');">    
  </div>
</form>
</div>

<div class="PageTool">
  <div class="LeftBox Tool">
    <input type="button" class="BtnSearch" value="查询"  title="查询" onclick="javascript:showDiv('divSearch');"/>
   ## <input type="button" class="BtnAdd" value="玩家注册"  title="玩家注册" onclick="javascript:doEdit('');"/>
   ## <input type="button" class="BtnDel" value="删除"  title="删除" onclick="javascript:doDelete();"/>
  </div>
</div>

<div class="PageContainer indieui-scroll">
<form name="listForm" method="post">
<input type="hidden" name="submitFlag" value="0">
<input type="hidden" name="token" value="$!{command.token}">
<table class="TbList">
  <thead> 
    <tr>
     ## <th style="width:20px;" nowrap>
      ##  <input type="checkbox" onclick="javascript:setCheckBoxValue('memberId', this.checked);">
    ##  </th>
        <th >玩家编号</th>
        <th >级别</th>
		<th >推荐人</th> 
		<th >归属人</th> 
		<th >总积分</th>
		<th >送出积分</th>
		<th >收到积分</th> 
		<th >状态</th> 
		<th >注册时间</th> 
		<th >参与时间</th>
		<th >操作</th> 
    </tr>
  </thead>
  <tbody>
  #foreach( $data in $page.data )
    <tr>
      <td><a href="../member/MemberInfo.do?memberId=$!{data.memberId}">$!{data.staffId}</a></td>
      <td>#lookUpDict($dicData.dicStockLevel "$!{data.stock.gradeNum}")</td>
	  <td >$!{data.referenceId}</td>
	  <td >$!{data.note}</td>
	  <td >$!{data.integral}</td>
	  <td >$!{data.giveIntegral}</td>
	  <td >$!{data.addIntegral}</td>
	   <td >#if($!{data.isok}==1)正常 #else 冻结  #end</td>
		<td >#formatTime(${data.createTime})</td>
	    <td >#formatTime(${data.activationTime})</td>
        <td ><a href="../member/MemberInfo.do?memberId=$!{data.memberId}">[编辑]</a>
		#if($!{data.isok}==1)
			<a href="javascript:frozen('$!{data.memberId}')">[冻结]</a>
		#else
			<a href="javascript:thwa('$!{data.memberId}')">[解除]</a>
		#end
		</td>
      
    </tr>
  #end
  </tbody>   
</table>
</form>
</div>

<div data-options="region:'south'" style="overflow-y:hidden"> 
#pageDirector($page "#getRequestUri()" "")
</div>
</body>
</html>
